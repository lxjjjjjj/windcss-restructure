!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";function s(e,r,n,t,a,o,i){try{var u=e[o](i),s=u.value}catch(e){return void n(e)}u.done?r(s):Promise.resolve(s).then(t,a)}function r(u){return function(){var e=this,i=arguments;return new Promise(function(r,n){var t=u.apply(e,i);function a(e){s(t,r,n,a,o,"next",e)}function o(e){s(t,r,n,a,o,"throw",e)}a(void 0)})}}function u(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var n=require("fs/promises"),a=require("path"),o=require("fast-glob"),c=require("mp-common-class").getCommonClass,i=require("./util/index").Logger,l=require("./resolveConfig"),e=require("./resolveCliArgs"),p=e.getSpecificArgsObj,f=e.parseCliArgs,g={SWITCH_STYLE_ISOLATION:"apply-shared",subPackageMap:new Map,mainPkgPagesPath:[]},m=function(){var e=r(regeneratorRuntime.mark(function e(){var r,n,t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:return r=e.sent,t=p(f()),n=t.specificArgsObj,t=t.restArgs,t={cliArgs:t},t=Object.assign(g,r,n,t),e.abrupt("return",t);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),v=function(){var e=r(regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=global.globalFinalCfg.miniprogramPath,global.globalFinalCfg.miniprogramAbsPath=a.resolve(__dirname,r);case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),b=function(){var e=r(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=global.globalFinalCfg.miniprogramAbsPath,e.prev=1,e.next=4,n.readFile(a.resolve(t,"./app.json"),"utf8");case 4:r=e.sent,r=JSON.parse(r),global.globalFinalCfg.mainPkgPagesPath=r.pages,(null==r?void 0:r.subPackages).forEach(function(e,r){var n=e.root,n=a.resolve(t,n);global.globalFinalCfg.subPackageMap.set(n,e)}),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(1),e.t0;case 15:case"end":return e.stop()}},e,null,[[1,12]])}));return function(){return e.apply(this,arguments)}}(),d=function(){var e=r(regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=global.globalFinalCfg.miniprogramAbsPath,r=a.relative("/Users/didi/Desktop/自己的项目/mpx-example",r),o.sync("./".concat(r,"/**/output.wxss")).forEach(function(e){n.unlink(e)});case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),h=function(){var e=r(regeneratorRuntime.mark(function e(){var r,n,t,a,o,i=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r=global.globalFinalCfg.miniprogramAbsPath,n=i.length,t=new Array(n),a=0;a<n;a++)t[a]=i[a];o=t.filter(function(e){return e!==r}),c({weight:2,css:"output.wxss",commonCssName:"common.wxss",outputFilePath:r,subpackageArr:u(o)});case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();function y(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var t=require("./cliExpand");r.forEach(function(e){t.apply(void 0,[e].concat(r))})}var w=function(){var e=r(regeneratorRuntime.mark(function e(){var r,n,t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:return global.globalFinalCfg=e.sent,e.next=5,v();case 5:return e.next=7,b();case 7:return t=require("./scanStrategy"),n=global,n=n.globalFinalCfg.cssMode,e.next=11,t(n);case 11:return t=e.sent,r=t.scanTaskQueue,n=t.queuePagesPath,t=require("./processSubpackage"),e.next=17,t.apply(void 0,[n].concat(u(r)));case 17:return e.next=19,d();case 19:return e.next=21,y.apply(void 0,u(r));case 21:return e.next=23,h.apply(void 0,u(r));case 23:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();function x(){return(x=r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.warning("==========tailwind compile start=========="),console.time("tailwind build time"),e.next=4,w();case 4:i.warning("==========tailwind compile end=========="),console.timeEnd("tailwind build time");case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){x.apply(this,arguments)}()});
//# sourceMappingURL=index.js.map
